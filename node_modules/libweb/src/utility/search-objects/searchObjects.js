import { searchField, searchObject } from "./util";

/**
 * Search in given objects
 * @param {String} search: search term
 * @param {Array<Object>} objects: objects to search
 * @param {Array<String>} properties :  names of properties (array of strings) to consider in the search. 
 *                              if null or undefined is passed all properties of objects will be 
 *                              considered in the search
 * @returns {Array<Object>}
 */
export function searchObjects(search, objects, properties = null) {
    if (objects === undefined || objects === null || objects.length === 0) {
        return [];
    }
    return objects.filter(function (o) {
        if (_.isObject(o) && !_.isArray(o) && !_.isFunction(o)) {
            var props = properties === undefined || properties === null ? Object.keys(o) : properties;
            return searchObject(search, o, props);
        }
        return searchField(search, o);
    });
};