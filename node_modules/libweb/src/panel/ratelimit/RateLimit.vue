<template>
    <b-card :title="$t('title')">
        <b-card-text>
            <label>{{$t('ClientIdHeader')}}</label>
            <b-form-input class="mt-4" type="text" v-model="o.ClientIdHeader" readonly dir="ltr"></b-form-input>
            <b-form-checkbox class="mt-4" v-model="o.DisableRateLimitHeaders" disabled>{{$t('DisableRateLimitHeaders')}}</b-form-checkbox>
            <b-form-checkbox
                class="mt-4"
                v-model="o.EnableEndpointRateLimiting"
                disabled
            >{{$t('EnableEndpointRateLimiting')}}</b-form-checkbox>
            <label class="mt-4">{{$t('HttpStatusCode')}}</label>
            <b-form-input type="number" v-model="o.HttpStatusCode" readonly dir="ltr"></b-form-input>
        </b-card-text>
    </b-card>
</template>

<script>
import loc from './RateLimit.i18n.json';
import { i18n } from "../../utility/VueI18n";
export default {
    i18n: i18n(loc),
    data() {
        return {
            o: {
                ClientIdHeader: '',
                ClientWhitelist: null,
                DisableRateLimitHeaders: false,
                EnableEndpointRateLimiting: false,
                EndpointWhitelist: null,
                GeneralRules: null,
                HttpStatusCode: 0,
                IpPolicyPrefix: '',
                IpWhitelist: null,
                QuotaExceededMessage: null,
                QuotaExceededResponse: null,
                RateLimitCounterPrefix: '',
                RealIpHeader: '',
                StackBlockedRequests: false,
            }
        };
    },
    async mounted() {
        try {
            var data = await this.$api.get('/api/ratelimit/RateLimitOptions/ViewOptions', null);
            var rules = JSON.parse(data.ipRateLimitPoliciesJson);
            var o = JSON.parse(data.ipRateLimitOptionsJson);
            this.o = Object.assign({}, this.o, o);
        } catch (ex) {
            console.error(ex);
        }
    }
}
</script>